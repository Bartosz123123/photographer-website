"use strict";var currentImageIndex,burgerBtn=document.querySelector(".burger-btn"),dropdown=document.querySelector(".dropdown"),arrows=document.querySelectorAll(".icon"),heroes=document.querySelectorAll(".parallax-hero"),sliderBox=document.querySelector(".slider-box"),leftBtn=document.querySelector(".btn-left"),rightBtn=document.querySelector(".btn-right"),carouselImages=document.querySelectorAll(".slider-img"),carouselWidth=100,carouselSpeed=5e3,index=0,showAllBtn=document.querySelector(".show-all"),gallery=document.querySelector(".gallery"),slider=document.querySelector(".slider"),thumbnails=document.querySelectorAll(".gallery-img"),popup=document.querySelector(".popup"),closePopupBtn=document.querySelector(".close-popup"),imgInPopup=document.querySelector(".popup-img"),popupArrowRight=document.querySelector(".popup-arrow-right"),popupArrowLeft=document.querySelector(".popup-arrow-left"),body=document.querySelector(".body"),username=document.querySelector("#username"),email=document.querySelector("#email"),data=document.querySelector("#date"),place=document.querySelector("#place"),sendBtn=document.querySelector(".send-btn"),error=document.querySelectorAll(".error-text"),clearBtn=document.querySelector(".clear-btn"),checkMail=function(e){/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value)?clearError():showError(e,"E-mail jest niepoprawny")},checkLength=function(e,r){e.value.length<r&&showError(e,"".concat(e.previousElementSibling.innerText," składa się z min. ").concat(r," znaków."))},showError=function(e,r){var t;e&&e.parentElement&&(t=(e=e.parentElement).querySelector(".error-text"),e.classList.add("error"),t.textContent=r)},clearError=function(e){e&&e.parentElement&&e.parentElement.classList.remove("error")},checkForm=function(e){e.forEach(function(e){""===e.value?showError(e,e.placeholder):clearError(e)})},handleRightArrowPopup=function(){currentImageIndex===thumbnails.length-1?currentImageIndex=0:currentImageIndex++,imgInPopup.src=thumbnails[currentImageIndex].src},handleLeftArrowPopup=function(){0===currentImageIndex?currentImageIndex=thumbnails.length-1:currentImageIndex--,imgInPopup.src=thumbnails[currentImageIndex].src},closePopup=function(){popup.classList.add("popup-fade-out"),body.classList.remove("body-hidden"),setTimeout(function(){popup.classList.add("popup-hidden"),popup.classList.remove("popup-fade-out")},300)},swapGalleryAndCarousel=function(){gallery.classList.toggle("show-gallery"),slider.classList.toggle("hide-carousel")},handleCarousel=function(){index++,changeImages()},startCarousel=setInterval(handleCarousel,carouselSpeed),changeImages=function(){index>carouselImages.length-1?index=0:index<0&&(index=carouselImages.length-1),sliderBox&&(sliderBox.style.transform="translateX(".concat(-index*carouselWidth,"%)"))},handleRightArrow=function(){index++,resetInterval()},handleLeftArrow=function(){index--,resetInterval()},resetInterval=function(){changeImages(),clearInterval(startCarousel),startCarousel=setInterval(handleCarousel,carouselSpeed)},handleNav=function(){dropdown.classList.toggle("active")},handleArrowOnScroll=function(){var r=window.scrollY;arrows.forEach(function(e){80<r?(e.classList.add("hide-arrow"),e.classList.remove("show-arrow")):r<45&&(e.classList.add("show-arrow"),e.classList.remove("hide-arrow"))})};window.addEventListener("scroll",function(){heroes.forEach(function(e){var r=window.pageYOffset,t=e.offsetTop;e.style.transform="translateY(".concat(.2*(r-t)+"px",")")})}),document.addEventListener("keydown",function(e){null===popup||popup.classList.contains("popup-hidden")||("ArrowRight"===e.key||39===e.keyCode?handleRightArrowPopup():"ArrowLeft"===e.key||37===e.keyCode?handleLeftArrowPopup():"Escape"!==e.key&&27!==e.keyCode||closePopup())}),null!==thumbnails&&thumbnails.forEach(function(e,r){e.addEventListener("click",function(e){popup.classList.remove("popup-hidden"),imgInPopup.src=e.target.src,body.classList.add("body-hidden"),currentImageIndex=r})}),null!==popupArrowRight&&popupArrowRight.addEventListener("click",handleRightArrowPopup),null!==popupArrowLeft&&popupArrowLeft.addEventListener("click",handleLeftArrowPopup),null!==closePopupBtn&&closePopupBtn.addEventListener("click",closePopup),null!==showAllBtn&&showAllBtn.addEventListener("click",swapGalleryAndCarousel),null!==leftBtn&&leftBtn.addEventListener("click",handleLeftArrow),null!==rightBtn&&rightBtn.addEventListener("click",handleRightArrow),document.addEventListener("scroll",handleArrowOnScroll),null!==burgerBtn&&burgerBtn.addEventListener("click",handleNav),null!==popup&&popup.addEventListener("click",function(e){e.target===popup&&closePopup()}),null!==clearBtn&&clearBtn.addEventListener("click",function(e){e.preventDefault(),[username,email,data,place].forEach(function(e){e.value=""})}),null!==sendBtn&&sendBtn.addEventListener("click",function(e){e.preventDefault(),checkForm([username,email,data,place]),checkLength(username,3),checkMail(email)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsidXNlcm5hbWUiLCJidXJnZXJCdG4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJkcm9wZG93biIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJoZXJvZXMiLCJzbGlkZXJCb3giLCJsZWZ0QnRuIiwicmlnaHRCdG4iLCJjYXJvdXNlbEltYWdlcyIsImNhcm91c2VsV2lkdGgiLCJjYXJvdXNlbFNwZWVkIiwic2hvd0FsbEJ0biIsImdhbGxlcnkiLCJzbGlkZXIiLCJ0aHVtYm5haWxzIiwiY2xvc2VQb3B1cEJ0biIsImltZ0luUG9wdXAiLCJwb3B1cEFycm93UmlnaHQiLCJwb3B1cEFycm93TGVmdCIsImJvZHkiLCJjdXJyZW50SW1hZ2VJbmRleCIsImRhdGEiLCJwbGFjZSIsInNlbmRCdG4iLCJlcnJvciIsImNsZWFyQnRuIiwiY2hlY2tNYWlsIiwicmUiLCJjbGVhckVycm9yIiwiZW1haWwiLCJ0ZXN0IiwidmFsdWUiLCJjaGVja0xlbmd0aCIsInNob3dFcnJvciIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJpbnB1dCIsInBhcmVudEVsZW1lbnQiLCJmb3JtQm94IiwibGVuZ3RoIiwiZXJyb3JNc2ciLCJpbm5lclRleHQiLCJjb25jYXQiLCJtaW4iLCJjbGFzc0xpc3QiLCJmb3JFYWNoIiwiYWRkIiwibXNnIiwiaGFuZGxlUmlnaHRBcnJvd1BvcHVwIiwiZWwiLCJwbGFjZWhvbGRlciIsInJlbW92ZSIsInNyYyIsImhhbmRsZUxlZnRBcnJvd1BvcHVwIiwic3dhcEdhbGxlcnlBbmRDYXJvdXNlbCIsInRvZ2dsZSIsInN0YXJ0Q2Fyb3VzZWwiLCJwb3B1cCIsImNoYW5nZUltYWdlcyIsImluZGV4Iiwic2V0VGltZW91dCIsInJlc2V0SW50ZXJ2YWwiLCJoYW5kbGVMZWZ0QXJyb3ciLCJzZXRJbnRlcnZhbCIsImhhbmRsZUNhcm91c2VsIiwiY2xlYXJJbnRlcnZhbCIsImhhbmRsZU5hdiIsImFycm93cyIsInRyYW5zZm9ybSIsImFycm93IiwiaGFuZGxlUmlnaHRBcnJvdyIsIndpbmRvdyIsImhlcm9Qb3NpdGlvbiIsInNjcm9sbFBvc2l0aW9uIiwic3VtIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUFycm93T25TY3JvbGwiLCJ0b3AiLCJlIiwia2V5IiwiY2xvc2VQb3B1cCIsInBhZ2VZT2Zmc2V0IiwiaGVybyIsIm9mZnNldFRvcCIsInN0eWxlIiwiY29udGFpbnMiLCJrZXlDb2RlIiwidGh1bWJuYWlsIiwidGFyZ2V0IiwicHJldmVudERlZmF1bHQiLCJjaGVja0Zvcm0iXSwibWFwcGluZ3MiOiJhQUFBLElBMkJNQSxrQkEzQkFDLFVBQVlDLFNBQVNDLGNBQWMsYUFBYSxFQUNoREMsU0FBV0YsU0FBU0MsY0FBYyxXQUFXLEVBRDdDRixPQUFTQyxTQUFXRyxpQkFBZSxPQUFBLEVBQ25DRCxPQUFXRixTQUFTQyxpQkFBYyxnQkFBWSxFQUU5Q0csVUFBU0osU0FBU0csY0FBaUIsYUFBQSxFQUVuQ0UsUUFBWUwsU0FBU0MsY0FBYyxXQUFBLEVBQ25DSyxTQUFVTixTQUFTQyxjQUFjLFlBQVksRUFDN0NNLGVBQW1CUCxTQUFDQyxpQkFBYyxhQUFhLEVBQy9DTyxjQUFpQlIsSUFDakJTLGNBQWdCLElBQ2hCQyxNQUFBQSxFQUdBQyxXQUFhWCxTQUFTQyxjQUFjLFdBQVksRUFDaERXLFFBQVVaLFNBQVNDLGNBQWMsVUFBVyxFQUM1Q1ksT0FBU2IsU0FBU0MsY0FBYyxTQUFVLEVBR2hEYSxXQUFBZCxTQUFBRyxpQkFBQSxjQUFBLEVBRU1ZLE1BQUFBLFNBQWdCZixjQUFTQyxRQUFjLEVBQ3ZDZSxjQUFhaEIsU0FBU0MsY0FBYyxjQUFhLEVBQ2pEZ0IsV0FBZWpCLFNBQUdBLGNBQVNDLFlBQWMsRUFDekNpQixnQkFBaUJsQixTQUFTQyxjQUFjLG9CQUFvQixFQUM1RGtCLGVBQWdCbEIsU0FBQUEsY0FBc0IsbUJBQUEsRUFDeENtQixLQUFBQSxTQUFpQm5CLGNBQUEsT0FBQSxFQUlmb0IsU0FBT3JCLFNBQVNDLGNBQWMsV0FB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R1NzQixPQUFSbkQsZUFwQ0FSLGNBcUNHeUUsaUJBQWdCLFFBQUFULFVBQUEsRUFHTmpGLE9BQVprQyxZQXJDRHJCLFdBc0NDZSxpQkFBZ0IsUUFBQTJCLHNCQUFBLEVBRWxCLE9BQUEvQyxTQXJDQ0EsUUFBUW9FLGlCQUFpQixRQUFTYixlQUFlLEVBRWpDLE9BQWJ0RCxVQUNIQSxTQUFTbUUsaUJBQWlCLFFBQVNMLGdCQUFnQixFQUVwRHJFLFNBQVMwRSxpQkFBaUIsU0FBVUMsbUJBQW1CLEVBRXJDLE9BQWQ1RSxXQUNIQSxVQUFVMkUsaUJBQWlCLFFBQVNULFNBQVMsRUFHaEMsT0FBVlQsT0FDSEEsTUFBTWtCLGlCQUFpQixRQUFTLFNBQUNHLEdBQzVCQSxFQUFFVSxTQUFXL0IsT0FDaEJ1QixXQUFVLENBRVosQ0FBQyxFQUdlLE9BQWJ0RCxVQUNIQSxTQUFTaUQsaUJBQWlCLFFBQVMsU0FBQ0csR0FDbkNBLEVBQUVXLGVBQWMsRUFFaEIsQ0FBQzFGLFNBQVUrQixNQUFPUixLQUFNQyxPQUFPc0IsUUFBUSxTQUFDSSxHQUN2Q0EsRUFBR2pCLE1BQVEsRUFDWixDQUFDLENBQ0YsQ0FBQyxFQUdjLE9BQVpSLFNBQ0hBLFFBQVFtRCxpQkFBaUIsUUFBUyxTQUFDRyxHQUNsQ0EsRUFBRVcsZUFBYyxFQUVoQkMsVUFBVSxDQUFDM0YsU0FBVStCLE1BQU9SLEtBQU1DLE1BQU0sRUFDeENVLFlBQVlsQyxTQUFVLENBQUMsRUFDdkI0QixVQUFVRyxLQUFLLENBQ2hCLENBQUMiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBidXJnZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyLWJ0bicpO1xyXG5jb25zdCBkcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bicpO1xyXG5jb25zdCBhcnJvd3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaWNvbicpO1xyXG5jb25zdCBoZXJvZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFyYWxsYXgtaGVybycpO1xyXG5cclxuY29uc3Qgc2xpZGVyQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlci1ib3gnKTtcclxuY29uc3QgbGVmdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tbGVmdCcpO1xyXG5jb25zdCByaWdodEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tcmlnaHQnKTtcclxuY29uc3QgY2Fyb3VzZWxJbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyLWltZycpO1xyXG5jb25zdCBjYXJvdXNlbFdpZHRoID0gMTAwO1xyXG5jb25zdCBjYXJvdXNlbFNwZWVkID0gNTAwMDtcclxubGV0IGluZGV4ID0gMDtcclxuXHJcbmNvbnN0IHNob3dBbGxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hvdy1hbGwnKTtcclxuY29uc3QgZ2FsbGVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5Jyk7XHJcbmNvbnN0IHNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXInKTtcclxuXHJcbmNvbnN0IHRodW1ibmFpbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FsbGVyeS1pbWcnKTtcclxuLy8gY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKTtcclxuY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKTtcclxuY29uc3QgY2xvc2VQb3B1cEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZS1wb3B1cCcpO1xyXG5jb25zdCBpbWdJblBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLWltZycpO1xyXG5jb25zdCBwb3B1cEFycm93UmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtYXJyb3ctcmlnaHQnKTtcclxuY29uc3QgcG9wdXBBcnJvd0xlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtYXJyb3ctbGVmdCcpO1xyXG5jb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvZHknKTtcclxubGV0IGN1cnJlbnRJbWFnZUluZGV4O1xyXG5cclxuY29uc3QgdXNlcm5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlcm5hbWUnKTtcclxuY29uc3QgZW1haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZW1haWwnKTtcclxuY29uc3QgZGF0YSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJyk7XHJcbmNvbnN0IHBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYWNlJyk7XHJcbmNvbnN0IHNlbmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VuZC1idG4nKTtcclxuY29uc3QgZXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZXJyb3ItdGV4dCcpO1xyXG5jb25zdCBjbGVhckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbGVhci1idG4nKTtcclxuXHJcbmNvbnN0IGNoZWNrTWFpbCA9IChlbWFpbCkgPT4ge1xyXG5cdGNvbnN0IHJlID1cclxuXHRcdC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwuKFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XHJcblxyXG5cdGlmIChyZS50ZXN0KGVtYWlsLnZhbHVlKSkge1xyXG5cdFx0Y2xlYXJFcnJvcigpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRzaG93RXJyb3IoZW1haWwsICdFLW1haWwgamVzdCBuaWVwb3ByYXdueScpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGNoZWNrTGVuZ3RoID0gKGlucHV0LCBtaW4pID0+IHtcclxuXHRpZiAoaW5wdXQudmFsdWUubGVuZ3RoIDwgbWluKSB7XHJcblx0XHRzaG93RXJyb3IoXHJcblx0XHRcdGlucHV0LFxyXG5cdFx0XHRgJHtpbnB1dC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlubmVyVGV4dH0gc2vFgmFkYSBzacSZIHogbWluLiAke21pbn0gem5ha8Ozdy5gXHJcblx0XHQpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IHNob3dFcnJvciA9IChpbnB1dCwgbXNnKSA9PiB7XHJcblx0aWYgKGlucHV0ICYmIGlucHV0LnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdGNvbnN0IGZvcm1Cb3ggPSBpbnB1dC5wYXJlbnRFbGVtZW50O1xyXG5cdFx0Y29uc3QgZXJyb3JNc2cgPSBmb3JtQm94LnF1ZXJ5U2VsZWN0b3IoJy5lcnJvci10ZXh0Jyk7XHJcblxyXG5cdFx0Zm9ybUJveC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG5cdFx0ZXJyb3JNc2cudGV4dENvbnRlbnQgPSBtc2c7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgY2xlYXJFcnJvciA9IChpbnB1dCkgPT4ge1xyXG5cdGlmIChpbnB1dCAmJiBpbnB1dC5wYXJlbnRFbGVtZW50KSB7XHJcblx0XHRjb25zdCBmb3JtQm94ID0gaW5wdXQucGFyZW50RWxlbWVudDtcclxuXHRcdGZvcm1Cb3guY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0Zvcm0gPSAoaW5wdXQpID0+IHtcclxuXHRpbnB1dC5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdFx0aWYgKGVsLnZhbHVlID09PSAnJykge1xyXG5cdFx0XHRzaG93RXJyb3IoZWwsIGVsLnBsYWNlaG9sZGVyKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNsZWFyRXJyb3IoZWwpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlUmlnaHRBcnJvd1BvcHVwID0gKCkgPT4ge1xyXG5cdGlmIChjdXJyZW50SW1hZ2VJbmRleCA9PT0gdGh1bWJuYWlscy5sZW5ndGggLSAxKSB7XHJcblx0XHRjdXJyZW50SW1hZ2VJbmRleCA9IDA7XHJcblx0fSBlbHNlIHtcclxuXHRcdGN1cnJlbnRJbWFnZUluZGV4Kys7XHJcblx0fVxyXG5cdGltZ0luUG9wdXAuc3JjID0gdGh1bWJuYWlsc1tjdXJyZW50SW1hZ2VJbmRleF0uc3JjO1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlTGVmdEFycm93UG9wdXAgPSAoKSA9PiB7XHJcblx0aWYgKGN1cnJlbnRJbWFnZUluZGV4ID09PSAwKSB7XHJcblx0XHRjdXJyZW50SW1hZ2VJbmRleCA9IHRodW1ibmFpbHMubGVuZ3RoIC0gMTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Y3VycmVudEltYWdlSW5kZXgtLTtcclxuXHR9XHJcblx0aW1nSW5Qb3B1cC5zcmMgPSB0aHVtYm5haWxzW2N1cnJlbnRJbWFnZUluZGV4XS5zcmM7XHJcbn07XHJcblxyXG5jb25zdCBjbG9zZVBvcHVwID0gKCkgPT4ge1xyXG5cdHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwLWZhZGUtb3V0Jyk7XHJcblx0Ym9keS5jbGFzc0xpc3QucmVtb3ZlKCdib2R5LWhpZGRlbicpO1xyXG5cclxuXHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwLWhpZGRlbicpO1xyXG5cdFx0cG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXAtZmFkZS1vdXQnKTtcclxuXHR9LCAzMDApO1xyXG59O1xyXG5cclxuY29uc3Qgc3dhcEdhbGxlcnlBbmRDYXJvdXNlbCA9ICgpID0+IHtcclxuXHRnYWxsZXJ5LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3ctZ2FsbGVyeScpO1xyXG5cdHNsaWRlci5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWNhcm91c2VsJyk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVDYXJvdXNlbCA9ICgpID0+IHtcclxuXHRpbmRleCsrO1xyXG5cdGNoYW5nZUltYWdlcygpO1xyXG59O1xyXG5cclxubGV0IHN0YXJ0Q2Fyb3VzZWwgPSBzZXRJbnRlcnZhbChoYW5kbGVDYXJvdXNlbCwgY2Fyb3VzZWxTcGVlZCk7XHJcblxyXG5jb25zdCBjaGFuZ2VJbWFnZXMgPSAoKSA9PiB7XHJcblx0aWYgKGluZGV4ID4gY2Fyb3VzZWxJbWFnZXMubGVuZ3RoIC0gMSkge1xyXG5cdFx0aW5kZXggPSAwO1xyXG5cdH0gZWxzZSBpZiAoaW5kZXggPCAwKSB7XHJcblx0XHRpbmRleCA9IGNhcm91c2VsSW1hZ2VzLmxlbmd0aCAtIDE7XHJcblx0fVxyXG5cclxuXHQvLyBzbGlkZXJCb3guc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHstaW5kZXggKiBjYXJvdXNlbFdpZHRofSUpYDtcclxuXHRpZiAoc2xpZGVyQm94KSB7XHJcblx0XHRzbGlkZXJCb3guc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHstaW5kZXggKiBjYXJvdXNlbFdpZHRofSUpYDtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVSaWdodEFycm93ID0gKCkgPT4ge1xyXG5cdGluZGV4Kys7XHJcblx0cmVzZXRJbnRlcnZhbCgpO1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlTGVmdEFycm93ID0gKCkgPT4ge1xyXG5cdGluZGV4LS07XHJcblx0cmVzZXRJbnRlcnZhbCgpO1xyXG59O1xyXG5cclxuY29uc3QgcmVzZXRJbnRlcnZhbCA9ICgpID0+IHtcclxuXHRjaGFuZ2VJbWFnZXMoKTtcclxuXHRjbGVhckludGVydmFsKHN0YXJ0Q2Fyb3VzZWwpO1xyXG5cdHN0YXJ0Q2Fyb3VzZWwgPSBzZXRJbnRlcnZhbChoYW5kbGVDYXJvdXNlbCwgY2Fyb3VzZWxTcGVlZCk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVOYXYgPSAoKSA9PiB7XHJcblx0ZHJvcGRvd24uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVBcnJvd09uU2Nyb2xsID0gKCkgPT4ge1xyXG5cdGNvbnN0IHRvcCA9IHdpbmRvdy5zY3JvbGxZO1xyXG5cdGFycm93cy5mb3JFYWNoKChhcnJvdykgPT4ge1xyXG5cdFx0aWYgKHRvcCA+IDgwKSB7XHJcblx0XHRcdGFycm93LmNsYXNzTGlzdC5hZGQoJ2hpZGUtYXJyb3cnKTtcclxuXHRcdFx0YXJyb3cuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdy1hcnJvdycpO1xyXG5cdFx0fSBlbHNlIGlmICh0b3AgPCA0NSkge1xyXG5cdFx0XHRhcnJvdy5jbGFzc0xpc3QuYWRkKCdzaG93LWFycm93Jyk7XHJcblx0XHRcdGFycm93LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUtYXJyb3cnKTtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XHJcblx0aGVyb2VzLmZvckVhY2goKGhlcm8pID0+IHtcclxuXHRcdGxldCBzY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5wYWdlWU9mZnNldDtcclxuXHRcdGNvbnN0IG51bWJlciA9IDAuMjtcclxuXHRcdC8vIGxldCBzdW0gPSBzY3JvbGxQb3NpdGlvbiAqIG51bWJlcjtcclxuXHRcdGxldCBoZXJvUG9zaXRpb24gPSBoZXJvLm9mZnNldFRvcDtcclxuXHRcdGxldCBzdW0gPSBzY3JvbGxQb3NpdGlvbiAtIGhlcm9Qb3NpdGlvbjtcclxuXHRcdGxldCBzdW0yID0gc3VtICogbnVtYmVyICsgJ3B4JztcclxuXHJcblx0XHRoZXJvLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKCR7c3VtMn0pYDtcclxuXHR9KTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuXHRpZiAocG9wdXAgIT09IG51bGwpIHtcclxuXHRcdGlmICghcG9wdXAuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cC1oaWRkZW4nKSkge1xyXG5cdFx0XHRpZiAoZS5rZXkgPT09ICdBcnJvd1JpZ2h0JyB8fCBlLmtleUNvZGUgPT09IDM5KSB7XHJcblx0XHRcdFx0aGFuZGxlUmlnaHRBcnJvd1BvcHVwKCk7XHJcblx0XHRcdH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd0xlZnQnIHx8IGUua2V5Q29kZSA9PT0gMzcpIHtcclxuXHRcdFx0XHRoYW5kbGVMZWZ0QXJyb3dQb3B1cCgpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJyB8fCBlLmtleUNvZGUgPT09IDI3KSB7XHJcblx0XHRcdFx0Y2xvc2VQb3B1cCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbmlmICh0aHVtYm5haWxzICE9PSBudWxsKSB7XHJcblx0dGh1bWJuYWlscy5mb3JFYWNoKCh0aHVtYm5haWwsIGluZGV4KSA9PiB7XHJcblx0XHR0aHVtYm5haWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC1oaWRkZW4nKTtcclxuXHRcdFx0aW1nSW5Qb3B1cC5zcmMgPSBlLnRhcmdldC5zcmM7XHJcblx0XHRcdGJvZHkuY2xhc3NMaXN0LmFkZCgnYm9keS1oaWRkZW4nKTtcclxuXHRcdFx0Y3VycmVudEltYWdlSW5kZXggPSBpbmRleDtcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG59XHJcblxyXG5pZiAocG9wdXBBcnJvd1JpZ2h0ICE9PSBudWxsKSB7XHJcblx0cG9wdXBBcnJvd1JpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlUmlnaHRBcnJvd1BvcHVwKTtcclxufVxyXG5cclxuaWYgKHBvcHVwQXJyb3dMZWZ0ICE9PSBudWxsKSB7XHJcblx0cG9wdXBBcnJvd0xlZnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVMZWZ0QXJyb3dQb3B1cCk7XHJcbn1cclxuaWYgKGNsb3NlUG9wdXBCdG4gIT09IG51bGwpIHtcclxuXHRjbG9zZVBvcHVwQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VQb3B1cCk7XHJcbn1cclxuaWYgKHNob3dBbGxCdG4gIT09IG51bGwpIHtcclxuXHRzaG93QWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3dhcEdhbGxlcnlBbmRDYXJvdXNlbCk7XHJcbn1cclxuaWYgKGxlZnRCdG4gIT09IG51bGwpIHtcclxuXHRsZWZ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlTGVmdEFycm93KTtcclxufVxyXG5pZiAocmlnaHRCdG4gIT09IG51bGwpIHtcclxuXHRyaWdodEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVJpZ2h0QXJyb3cpO1xyXG59XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhhbmRsZUFycm93T25TY3JvbGwpO1xyXG5cclxuaWYgKGJ1cmdlckJ0biAhPT0gbnVsbCkge1xyXG5cdGJ1cmdlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZU5hdik7XHJcbn1cclxuXHJcbmlmIChwb3B1cCAhPT0gbnVsbCkge1xyXG5cdHBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdGlmIChlLnRhcmdldCA9PT0gcG9wdXApIHtcclxuXHRcdFx0Y2xvc2VQb3B1cCgpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59XHJcblxyXG5pZiAoY2xlYXJCdG4gIT09IG51bGwpIHtcclxuXHRjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0W3VzZXJuYW1lLCBlbWFpbCwgZGF0YSwgcGxhY2VdLmZvckVhY2goKGVsKSA9PiB7XHJcblx0XHRcdGVsLnZhbHVlID0gJyc7XHJcblx0XHR9KTtcclxuXHR9KTtcclxufVxyXG5cclxuaWYgKHNlbmRCdG4gIT09IG51bGwpIHtcclxuXHRzZW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRjaGVja0Zvcm0oW3VzZXJuYW1lLCBlbWFpbCwgZGF0YSwgcGxhY2VdKTtcclxuXHRcdGNoZWNrTGVuZ3RoKHVzZXJuYW1lLCAzKTtcclxuXHRcdGNoZWNrTWFpbChlbWFpbCk7XHJcblx0fSk7XHJcbn1cclxuIl19
